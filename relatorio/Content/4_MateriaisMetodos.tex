\chapter{Materiais e Métodos}
\label{Materiais}
\hspace{0,5cm}
Descrição clara dos procedimentos e dos materiais adotados para o desenvolvimento do trabalho (sem resultados) - incluindo sua adequação ao trabalho.

Tem que responder às perguntas:
-está com um tamanho adequado (proporcional) à monografia?
-há informação suficiente e clara sobre os materiais e sobre os métodos  adotados?

Não há necessidade de reproduzir (copiar) as obras que embasam o trabalho e sim colocar o suficiente para o entendimento do trabalho e citar as referências.



% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\section{Materiais}
\hspace{0,5cm}
Materiais utilizados no projeto.

  \subsection{Intel Galileo} % rebs

  \subsection{Smartphone Android} % davi
    Atualmente, os \emph{smartphones} Android vem sendo uma ótima plataforma
    para desenvolvimento. Já integrado com diversos sensores e dispositivos de
    entrada e saída; como acelerômetro, GPS, câmera, microfone, sistema de som,
    tela, entre outros; além de disponibilizar uma sólida ferramenta de
    desenvolvimento, a Android SDK.

    Dos \emph{hardwares} providos pelo \emph{smartphone} foi utilizado na aplicação
    os sensores inerciais, a fim de obter os angulos de euler da orientação do
    dispositivo; a tela, para a exibição da interface gráfica e a
    conexão \emph{wifi}, para comunicação com a Intel Galileo. A forma como estes
    recursos foram utilizados será abordada na exposição da aplicação Android.

  \subsection{IPCam} % rebs

  \subsection{Flask}
    % http://flask.pocoo.org/
    ``O Flask é um microframework para python, baseado no \emph{Werkzeug},
    \emph{Jinja2} e boas intenções'' \b{referência para página do flask}. Com o
    \emph{Flask} podemos facilmente criar um \emph{backend} para processar as
    requisições à Intel Galileo, implementando assim um \emph{WebService REST}.

    Para utilizarmos o Flask, atrelamos um método python a uma determinada URL.
    Assim conseguimos recuperar dados transmitidos através da requisição HTTP, 
    processá-los e retornarmos uma resposta. Através do Flask, o R3V provê três
    serviços: \emph{streaming} de vídeo de uma câmera IP, movimentação desta
    câmera e \emph{dead reckoning} do movimento da câmera. A seguir abordamos
    melhor o provisionamento de cada um destes serviços.

    Através da URL \textless{}\emph{endereço\_da\_intel\_galileo}\textgreater
    /camstream/ provemos o serviço de \emph{streaming} de vídeo. Este endereço
    retorna um \emph{stream} MJPEG ouseja, uma sequência de imagens JPEG. Este
    serviço recupera as imagens da câmera pelo mesmo serviço de MJPEG. Desta
    forma ele atua somente como um \emph{proxy}, encapsulando o serviço de
    \emph{stream} de vídeo da própria câmera IP.

    Através da URL \textless{}\emph{endereço\_da\_intel\_galileo}\textgreater
    /camposition/cam_step/?move=\textless{}direção\textgreater{} provemos o
    serviço de movimentação da câmera IP em passos de cinco graus. No parâmatro
    direção deve-se informar o código da direção que se deve atuar. As direções
    são mapeadas conforme a tabela \ref{tblDirectionCodes}.

    \begin{tabular}[h]{|c|c|}
      \caption{\label{tblDirectionCodes} }
      \hline  Código  & Direção   \\  \hline
              0       & abaixo    \\  \hline
              2       & acima     \\  \hline
              4       & esquerda  \\  \hline
              6       & direita   \\  \hline
              90      & diagonal esquerda abaixo  \\  \hline
              91      & diagonal direita abaixo   \\  \hline
              92      & diagonal esquerda acima   \\  \hline
              93      & diagonal direita acima    \\  \hline
    \end{tabular}

    Através da URL \textless{}\emph{endereço\_da\_intel\_galileo}\textgreater
    /camposition/set_zero/ inicializamos o sistema de \emph{dead reckoning} do
    movimento da câmera, tomando a posição atual da câmera como zero graus de
    rotação em torno do eixo $x$ e zero graus de rotação em torno do eixo $y$.

    Através da URL \textless{}\emph{endereço\_da\_intel\_galileo}\textgreater
    /camposition/?pitch=\textless{}x\textgreater{}\&yaw=\textless{}y\textgreater{}
    provemos o serviço de movimentação da câmera com \emph{dead reckoning} do
    movimento. No parâmetro $x$ deve-se atribuir qual a posição angular desejada
    em torno do eixo $x$. No parâmetro $y$ deve-se atribuir qual a posição
    angular desejada em torno do eixo $y$. O serviço de movimentação por \emph{
    dead reckoning} só aceita posições angulares para \emph{pitch} entre 80 e 
    \textminus 30 graus e posições angulares para \emph{yaw} entre 100 e 
    \textminus 100 graus.

    Desta forma temos a Intel Galileo provendo os servições de \emph{streaming},
    \emph{movimentação} e \emph{dead reckoning} da posição de uma câmera IP.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\section{Métodos} %rebs
\hspace{0,5cm}
Métodos utilizados no projeto.

  \subsection{MJPEG}
  % Idea: http://blog.miguelgrinberg.com/post/video-streaming-with-flask
  \subsection{\emph{Dead Reckoning}} % rebs
  \subsection{Applicação Cliente} %davi
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    A android SDK provê meios de criar interfaces gráficas, desenvolver
    aplicativos internacionalizáveis (em diversas línguas), aplicativos com
    processamento paralelo, comunicação interprocesso, conexão com servidores
    HTTP, e muitas outras funcionalidades. Neste projeto nos interessa a criação
    de uma interface gráfica para utilizar o \emph{smartphone} no Google
    Cardboard, o acesso aos sensores inerciais (acelerômetro, giroscópio e 
    magnetômetro) e a comunicação com servidores HTTP.

    Para a interface gráfico, o necessário é podermos exibir uma imagem em cada
    metade da tela, com o celular em orientação paisagem. Ambas as imagens deve 
    ser a mesma, de forma a dar o aspecto tridimensional quando no \emph{
    cardboard}. Para nos beneficiarmos de algumas facilidades da \emph{Cardboard
    SDK}, discutidas adiante, foi necessário manter a interface de renderizador
    gráfico da \emph{cardboard}, mas uma nova interface foi sobreposta sobre a
    padrão. No código fonte.


